# openapi-to-go-server example

## Overview

This folder contains the output from the openapi-to-go-server tool (*.gen.go) as well as a few helpers to run the webserver via Docker.  After running [generate_example.sh](../generate_example.sh), run [run_example.sh](run_example.sh) to run the generated webserver.  Endpoints can be accessed at http://localhost:8080/scd as the base URL for the API defined at https://tiny.cc/dssapi_utm; for instance, navigate to http://localhost:8080/scd/dss/v1/operational_intent_references/foo to see a default JSON result.

## Structure

### [types.gen.go](types.gen.go)

This file contains Go definitions of all the data types defined in the OpenAPI YAML file (from components/schemas).  Even implicit data types (defined inline for a field in another data type) are generated.

### [interface.gen.go](interface.gen.go)

This file contains a definition for the interface to an Implementation of the specified API.  This interface includes a method for each verb:endpoint combination as well as the data types describing all defined response codes and response schemas for each handler.

### [server.gen.go](server.gen.go)

This file contains code to produce a webserver (using only the built-in `net/http` and `encoding/json` libraries) using a provided instance of the Implementation interface defined in interface.gen.go.  The `Router` generated by this file exposes a `Handle` method intended to be used with `http.Server`'s `Handler`, but also returns a boolean indication of whether the request was handled so that multiple `Router`s can be combined into a single server.  This allows multiple APIs generated by this tool to be supported by a single server instance, if desired, using the provided `MultiRouter`.

### [common.gen.go](common.gen.go)

This file contains a small amount of shared infrastructure code that must be included once in a webserver using Go code generated by this tool (even if multiple APIs are used in that webserver).

### [main.gen.go](main.gen.go)

This file contains a demonstration webserver entrypoint along with trivial/default handler functions for all verb:endpoint combinations defined in the OpenAPI YAML.  The expectation for a normal usage of this tool is that equivalent content would be created manually without using automatic generation.
